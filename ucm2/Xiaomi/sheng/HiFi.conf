# Use case configuration for Xiaomi Pad 6S Pro 12.4
# Author: map220v <map220v300@gmail.com>

SectionVerb {
	EnableSequence [
		# SPEAKER PLAYBACK TODO
		# Enable Secondary I2S mixer on MultiMedia1
		#cset "name='SECONDARY_MI2S_RX Audio Mixer MultiMedia1' 1"

		# WCD9380 RX/TX on MultiMedia2 and MultiMedia3
		cset "name='RX_CODEC_DMA_RX_0 Audio Mixer MultiMedia2' 1"
		cset "name='MultiMedia3 Mixer TX_CODEC_DMA_TX_3' 1"
	]

	DisableSequence [
		# Disable Secondary I2S mixer on MultiMedia1
		#cset "name='SECONDARY_MI2S_RX Audio Mixer MultiMedia1' 0"

		cset "name='RX_CODEC_DMA_RX_0 Audio Mixer MultiMedia2' 0"
		cset "name='MultiMedia3 Mixer TX_CODEC_DMA_TX_3' 0"
	]

	Value {
		TQ "HiFi"
	}
}

#SectionDevice."Speaker" {
#	Comment "Speaker playback"
#
#	Value {
#		PlaybackPriority 150
#		PlaybackPCM "hw:${CardId},0"
#		PlaybackChannels 2
#	}
#}

SectionDevice."Headphones" {
	Comment "Headphones playback"

	EnableSequence [
		cset "name='HPHL_RDAC Switch' 1"
		cset "name='HPHR_RDAC Switch' 1"
		cset "name='HPHL Switch' 1"
		cset "name='HPHR Switch' 1"
		cset "name='HPHR_COMP Switch' 0"
		cset "name='HPHL_COMP Switch' 0"
		cset "name='CLSH Switch' 1"
		cset "name='LO Switch' 1"

		cset "name='RX_HPH PWR Mode' LOHIFI"
		cset "name='RX HPH Mode' CLS_H_ULP"
		cset "name='RX_MACRO RX0 MUX' AIF1_PB"
		cset "name='RX_MACRO RX1 MUX' AIF1_PB"
		cset "name='RX INT0_1 MIX1 INP0' RX0"
		cset "name='RX INT1_1 MIX1 INP0' RX1"
		cset "name='RX INT0 DEM MUX' CLSH_DSM_OUT"
		cset "name='RX INT1 DEM MUX' CLSH_DSM_OUT"
		cset "name='RX_COMP1 Switch' 1"
		cset "name='RX_COMP2 Switch' 1"
	]

	DisableSequence [
		cset "name='HPHL_RDAC Switch' 0"
		cset "name='HPHR_RDAC Switch' 0"
		cset "name='HPHL Switch' 0"
		cset "name='HPHR Switch' 0"
		cset "name='CLSH Switch' 0"
		cset "name='LO Switch' 0"

		cset "name='RX_MACRO RX0 MUX' ZERO"
		cset "name='RX_MACRO RX1 MUX' ZERO"
		cset "name='RX INT0_1 MIX1 INP0' ZERO"
		cset "name='RX INT1_1 MIX1 INP0' ZERO"
		cset "name='RX INT0 DEM MUX' NORMAL_DSM_OUT"
		cset "name='RX INT1 DEM MUX' NORMAL_DSM_OUT"
		cset "name='RX_COMP1 Switch' 0"
		cset "name='RX_COMP2 Switch' 0"
		cset "name='RX HPH Mode' CLS_H_INVALID"
	]

	Value {
		PlaybackPriority 200
		PlaybackPCM "hw:${CardId},1"
		PlaybackMixer "default:${CardId}"
		PlaybackMixerElem "HP"
		PlaybackChannels 2
		#JackControl "Headphone Jack"
	}
}

SectionDevice."Mic1" {
	Comment "Left Microphone"

	ConflictingDevice [
		"Mic2"
		"Mic3"
		"Mic4"
		"Headset"
	]

	EnableSequence [
		cset "name='TX DEC0 MUX' SWR_MIC"
		cset "name='TX SMIC MUX0' SWR_MIC1"
		cset "name='TX_AIF1_CAP Mixer DEC0' 1"

		cset "name='ADC2 MUX' INP3"
		cset "name='ADC2_MIXER Switch' 1"
		cset "name='ADC2 Switch' 1"
	]

	DisableSequence [
		cset "name='ADC2_MIXER Switch' 0"
		cset "name='ADC2 Switch' 0"

		cset "name='TX SMIC MUX0' ZERO"
		cset "name='TX_AIF1_CAP Mixer DEC0' 0"
	]

	Value {
		CapturePriority 200
		CapturePCM "hw:${CardId},2"
		CaptureMixerElem "ADC2"
		CaptureChannels 1
	}
}

SectionDevice."Mic2" {
	Comment "Back Microphone"

	ConflictingDevice [
		"Mic1"
		"Mic3"
		"Mic4"
		"Headset"
	]

	EnableSequence [
		cset "name='TX DEC0 MUX' SWR_MIC"
		cset "name='TX SMIC MUX0' SWR_MIC0"
		cset "name='TX_AIF1_CAP Mixer DEC0' 1"

		cset "name='ADC3_MIXER Switch' 1"
		cset "name='ADC3 Switch' 1"
	]

	DisableSequence [
		cset "name='ADC3_MIXER Switch' 0"
		cset "name='ADC3 Switch' 0"

		cset "name='TX SMIC MUX0' ZERO"
		cset "name='TX_AIF1_CAP Mixer DEC0' 0"
	]

	Value {
		CapturePriority 100
		CapturePCM "hw:${CardId},2"
		CaptureMixerElem "ADC3"
		CaptureChannels 1
	}
}

SectionDevice."Mic3" {
	Comment "Top-Left Microphone"

	ConflictingDevice [
		"Mic1"
		"Mic2"
		"Mic4"
		"Headset"
	]

	EnableSequence [
		cset "name='TX DEC0 MUX' SWR_MIC"
		cset "name='TX SMIC MUX0' SWR_MIC1"
		cset "name='TX_AIF1_CAP Mixer DEC0' 1"

		cset "name='ADC4_MIXER Switch' 1"
		cset "name='ADC4 Switch' 1"
	]

	DisableSequence [
		cset "name='ADC4_MIXER Switch' 0"
		cset "name='ADC4 Switch' 0"

		cset "name='TX SMIC MUX0' ZERO"
		cset "name='TX_AIF1_CAP Mixer DEC0' 0"
	]

	Value {
		CapturePriority 125
		CapturePCM "hw:${CardId},2"
		CaptureMixerElem "ADC4"
		CaptureChannels 1
	}
}

SectionDevice."Mic4" {
	Comment "Top-Right Microphone"

	ConflictingDevice [
		"Mic1"
		"Mic2"
		"Mic3"
		"Headset"
	]

	EnableSequence [
		cset "name='TX DEC0 MUX' SWR_MIC"
		cset "name='TX SMIC MUX0' SWR_MIC0"
		cset "name='TX_AIF1_CAP Mixer DEC0' 1"

		cset "name='ADC1_MIXER Switch' 1"
		cset "name='ADC1 Switch' 1"
	]

	DisableSequence [
		cset "name='ADC1_MIXER Switch' 0"
		cset "name='ADC1 Switch' 0"

		cset "name='TX SMIC MUX0' ZERO"
		cset "name='TX_AIF1_CAP Mixer DEC0' 0"
	]

	Value {
		CapturePriority 150
		CapturePCM "hw:${CardId},2"
		CaptureMixerElem "ADC1"
		CaptureChannels 1
	}
}

SectionDevice."Headset" {
	Comment "Headset Microphone"

	ConflictingDevice [
		"Mic1"
		"Mic2"
		"Mic3"
		"Mic4"
	]

	EnableSequence [
		cset "name='TX DEC0 MUX' SWR_MIC"
		cset "name='TX SMIC MUX0' SWR_MIC1"
		cset "name='TX_AIF1_CAP Mixer DEC0' 1"

		cset "name='ADC2 MUX' INP2"
		cset "name='ADC2_MIXER Switch' 1"
		cset "name='ADC2 Switch' 1"
	]

	DisableSequence [
		cset "name='ADC2_MIXER Switch' 0"
		cset "name='ADC2 Switch' 0"

		cset "name='TX SMIC MUX0' ZERO"
		cset "name='TX_AIF1_CAP Mixer DEC0' 0"
	]

	Value {
		CapturePriority 200
		CapturePCM "hw:${CardId},2"
		CaptureMixerElem "ADC2"
		CaptureChannels 1
		JackControl "Mic Jack"
	}
}
